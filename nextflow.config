// Simplified Nextflow config with three profiles: local, dsi (docker), and imperial (singularity)
// - local: development on laptop/workstation using local executor
// - dsi: Docker-enabled profile for containerized execution
// - imperial: Singularity-enabled profile for the Imperial HPC (no Docker)

profiles {

    local {
        process {
            executor = 'local'
            cpus = 1
            memory = '4 GB'
            time = { 1.h * task.attempt }
            errorStrategy = 'finish'
            // only QC_INTERSECT uses an R image with Seurat/data.table
            withName:QC_INTERSECT {
                container = 'ghcr.io/johnsonlab-ic/sc_analysis:latest'
            }
        }
        docker.enabled = true
        singularity.enabled = false
    }

}
